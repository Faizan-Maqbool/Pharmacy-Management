{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PMLS\\\\Desktop\\\\Pharmacy Management\\\\pharmacy-management\\\\client\\\\src\\\\services\\\\api.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Cart } from './components/Cart';\nimport { ProductForm } from './components/ProductForm';\nimport { ProductList } from './components/ProductList';\nimport { getProducts, addProduct, deleteProduct } from \"./services/api\";\nimport \"./index.css\";\nimport './App.css';\n\n// Default products that will be restored when app starts\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_PRODUCTS = [{\n  _id: \"default-product-1\",\n  name: \"Paracetamol\",\n  price: \"5.99\",\n  stock: \"50\",\n  manufacturer: \"MediCorp\",\n  expiry: \"12/2025\",\n  category: \"Painkillers\"\n}, {\n  _id: \"default-product-2\",\n  name: \"Amoxicillin\",\n  price: \"12.50\",\n  stock: \"30\",\n  manufacturer: \"PharmaCare\",\n  expiry: \"06/2026\",\n  category: \"Antibiotics\"\n}, {\n  _id: \"default-product-3\",\n  name: \"Vitamin C\",\n  price: \"8.25\",\n  stock: \"100\",\n  manufacturer: \"VitaHealth\",\n  expiry: \"03/2026\",\n  category: \"Vitamins\"\n}];\nfunction App() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Function to check and restore default products\n  async function ensureDefaultProducts() {\n    try {\n      const existingProducts = await getProducts();\n\n      // Check which default products are missing\n      const defaultIds = DEFAULT_PRODUCTS.map(p => p._id);\n      const existingIds = existingProducts.map(p => p._id);\n\n      // Find missing default products\n      const missingDefaults = DEFAULT_PRODUCTS.filter(dp => !existingIds.includes(dp._id));\n\n      // Add any missing default products back to the database\n      for (const product of missingDefaults) {\n        await addProduct(product);\n        console.log(`Restored default product: ${product.name}`);\n      }\n\n      // Refresh products after ensuring defaults\n      await fetchProducts();\n    } catch (error) {\n      console.error(\"Error ensuring default products:\", error);\n    }\n  }\n  async function fetchProducts() {\n    setLoading(true);\n    try {\n      const data = await getProducts();\n      setProducts(data);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    // When app starts, ensure default products exist and then fetch all products\n    ensureDefaultProducts();\n  }, []);\n  function handleAddToCart(product) {\n    setCart(prev => {\n      const found = prev.find(item => item._id === product._id);\n      if (found) {\n        return prev.map(item => item._id === product._id ? {\n          ...item,\n          quantity: (item.quantity || 1) + (product.quantity || 1)\n        } : item);\n      }\n      return [...prev, product];\n    });\n  }\n  function handleRemoveFromCart(id) {\n    setCart(prev => prev.filter(item => item._id !== id));\n  }\n  async function handleAddMedicine(newMedicine) {\n    await addProduct(newMedicine);\n    fetchProducts();\n  }\n  async function handleDeleteProduct(productId) {\n    try {\n      // Delete from database\n      await deleteProduct(productId);\n\n      // Update frontend state\n      setProducts(prevProducts => prevProducts.filter(product => product._id !== productId));\n\n      // Also remove from cart if present\n      setCart(prevCart => prevCart.filter(item => item._id !== productId));\n    } catch (error) {\n      console.error(\"Error deleting product:\", error);\n    }\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl font-semibold text-gray-600\",\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 text-gray-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white shadow-sm border-b sticky top-0 z-10 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-red-600\",\n        children: \"Pharmacy Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-5xl mx-auto py-8 px-4\",\n      children: [/*#__PURE__*/_jsxDEV(ProductList, {\n        products: products,\n        onAddToCart: handleAddToCart,\n        onDeleteProduct: handleDeleteProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {\n        cart: cart,\n        onRemove: handleRemoveFromCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductForm, {\n        onAdd: handleAddMedicine\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"bg-white shadow-inner border-t mt-6 p-4 text-center text-gray-500\",\n      children: [\"\\xA9 \", new Date().getFullYear(), \" Pharmacy Management. All rights reserved.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Wktxsurf60KrvO0JopwB+BXe4gs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Cart","ProductForm","ProductList","getProducts","addProduct","deleteProduct","jsxDEV","_jsxDEV","DEFAULT_PRODUCTS","_id","name","price","stock","manufacturer","expiry","category","App","_s","products","setProducts","cart","setCart","loading","setLoading","ensureDefaultProducts","existingProducts","defaultIds","map","p","existingIds","missingDefaults","filter","dp","includes","product","console","log","fetchProducts","error","data","handleAddToCart","prev","found","find","item","quantity","handleRemoveFromCart","id","handleAddMedicine","newMedicine","handleDeleteProduct","productId","prevProducts","prevCart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onAddToCart","onDeleteProduct","onRemove","onAdd","Date","getFullYear","_c","$RefreshReg$"],"sources":["C:/Users/PMLS/Desktop/Pharmacy Management/pharmacy-management/client/src/services/api.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Cart } from './components/Cart';\r\nimport { ProductForm } from './components/ProductForm';\r\nimport { ProductList } from './components/ProductList';\r\nimport { getProducts, addProduct, deleteProduct } from \"./services/api\";\r\nimport \"./index.css\";\r\nimport './App.css';\r\n\r\n// Default products that will be restored when app starts\r\nconst DEFAULT_PRODUCTS = [\r\n  {\r\n    _id: \"default-product-1\",\r\n    name: \"Paracetamol\",\r\n    price: \"5.99\",\r\n    stock: \"50\",\r\n    manufacturer: \"MediCorp\",\r\n    expiry: \"12/2025\",\r\n    category: \"Painkillers\"\r\n  },\r\n  {\r\n    _id: \"default-product-2\",\r\n    name: \"Amoxicillin\",\r\n    price: \"12.50\",\r\n    stock: \"30\",\r\n    manufacturer: \"PharmaCare\",\r\n    expiry: \"06/2026\",\r\n    category: \"Antibiotics\"\r\n  },\r\n  {\r\n    _id: \"default-product-3\",\r\n    name: \"Vitamin C\",\r\n    price: \"8.25\",\r\n    stock: \"100\",\r\n    manufacturer: \"VitaHealth\",\r\n    expiry: \"03/2026\",\r\n    category: \"Vitamins\"\r\n  }\r\n];\r\n\r\nfunction App() {\r\n  const [products, setProducts] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Function to check and restore default products\r\n  async function ensureDefaultProducts() {\r\n    try {\r\n      const existingProducts = await getProducts();\r\n      \r\n      // Check which default products are missing\r\n      const defaultIds = DEFAULT_PRODUCTS.map(p => p._id);\r\n      const existingIds = existingProducts.map(p => p._id);\r\n      \r\n      // Find missing default products\r\n      const missingDefaults = DEFAULT_PRODUCTS.filter(\r\n        dp => !existingIds.includes(dp._id)\r\n      );\r\n      \r\n      // Add any missing default products back to the database\r\n      for (const product of missingDefaults) {\r\n        await addProduct(product);\r\n        console.log(`Restored default product: ${product.name}`);\r\n      }\r\n      \r\n      // Refresh products after ensuring defaults\r\n      await fetchProducts();\r\n    } catch (error) {\r\n      console.error(\"Error ensuring default products:\", error);\r\n    }\r\n  }\r\n\r\n  async function fetchProducts() {\r\n    setLoading(true);\r\n    try {\r\n      const data = await getProducts();\r\n      setProducts(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching products:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // When app starts, ensure default products exist and then fetch all products\r\n    ensureDefaultProducts();\r\n  }, []);\r\n\r\n  function handleAddToCart(product) {\r\n    setCart((prev) => {\r\n      const found = prev.find((item) => item._id === product._id);\r\n      if (found) {\r\n        return prev.map((item) =>\r\n          item._id === product._id\r\n            ? { ...item, quantity: (item.quantity || 1) + (product.quantity || 1) }\r\n            : item\r\n        );\r\n      }\r\n      return [...prev, product];\r\n    });\r\n  }\r\n\r\n  function handleRemoveFromCart(id) {\r\n    setCart((prev) => prev.filter((item) => item._id !== id));\r\n  }\r\n\r\n  async function handleAddMedicine(newMedicine) {\r\n    await addProduct(newMedicine);\r\n    fetchProducts();\r\n  }\r\n\r\n  async function handleDeleteProduct(productId) {\r\n    try {\r\n      // Delete from database\r\n      await deleteProduct(productId);\r\n      \r\n      // Update frontend state\r\n      setProducts(prevProducts => \r\n        prevProducts.filter(product => product._id !== productId)\r\n      );\r\n      \r\n      // Also remove from cart if present\r\n      setCart(prevCart => \r\n        prevCart.filter(item => item._id !== productId)\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error deleting product:\", error);\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-xl font-semibold text-gray-600\">Loading products...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 text-gray-900\">\r\n      <header className=\"bg-white shadow-sm border-b sticky top-0 z-10 p-4\">\r\n        <h1 className=\"text-2xl font-bold text-red-600\">Pharmacy Management</h1>\r\n      </header>\r\n      <main className=\"max-w-5xl mx-auto py-8 px-4\">\r\n        <ProductList \r\n          products={products} \r\n          onAddToCart={handleAddToCart} \r\n          onDeleteProduct={handleDeleteProduct}\r\n        />\r\n        <Cart cart={cart} onRemove={handleRemoveFromCart} />\r\n        <ProductForm onAdd={handleAddMedicine} />\r\n      </main>\r\n      <footer className=\"bg-white shadow-inner border-t mt-6 p-4 text-center text-gray-500\">\r\n        &copy; {new Date().getFullYear()} Pharmacy Management. All rights reserved.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}